<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
  <title>Crypto bookmarklet</title>
  <script src="crypto-bookmarklet.js"></script>
  <script>
    function go() {
      var password = document.getElementById('password').value;
      var code     = document.getElementById('code').value;
      var result   = document.getElementById('result');
      var gen_btn  = document.getElementById('generate');
      get_key(password)
      .then(encrypt(code))
      .then((ciphertext) => result.value = generate(ciphertext))
      .then(() => gen_btn.disabled = true);
    }
  </script>
</head>
<body>
<div class="pure-form pure-form-stacked">
  <input id="password" type="password" placeholder="Enter Password">
  <textarea id="code" autocomplete="off" placeholder="Enter javascript"></textarea>
  <button id="generate" onclick="go();" autocomplete="off" class="pure-button pure-button-primary">generate bookmarklet</button>
  <textarea id="result" autocomplete="off" readonly></textarea>
</div>
</body>
</html>
